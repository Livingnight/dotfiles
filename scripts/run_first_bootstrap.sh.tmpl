#!/bin/bash
# Generated by chezmoi on {{ now | date "2006-01-02 15:04:05" }}

# Package installation script for various Linux distributions
# Generated by chezmoi template

set -e

{{- if eq .chezmoi.osRelease.id "ubuntu" }}
PKG_MANAGER="apt"
PKG_UPDATE="sudo apt update"
PKG_INSTALL="sudo apt install -y"
PKG_SEARCH="apt search"

PACKAGES=(
  build-essential
  curl
  git
  unzip
  zip
  zsh
  fd-find
  ripgrep
  fzf
  tmux
  python3
  python3-pip
  libssl-dev
  libreadline-dev
  zlib1g-dev
  libbz2-dev
  libsqlite3-dev
  llvm
  libncursesw5-dev
  xz-utils
  tk-dev
  libxml2-dev
  libxmlsec1-dev
  libffi-dev
  liblzma-dev
  software-properties-common
)

{{- else if eq .chezmoi.osRelease.id "debian" }}
PKG_MANAGER="apt"
PKG_UPDATE="sudo apt update"
PKG_INSTALL="sudo apt install -y"
PKG_SEARCH="apt search"

PACKAGES=(
  build-essential
  curl
  git
  unzip
  zip
  zsh
  fd-find
  ripgrep
  fzf
  tmux
  python3
  python3-pip
  libssl-dev
  libreadline-dev
  zlib1g-dev
  libbz2-dev
  libsqlite3-dev
  llvm
  libncursesw5-dev
  xz-utils
  tk-dev
  libxml2-dev
  libxml2sec1-dev
  libffi-dev
  liblzma-dev
  software-properties-common
)

{{- else if eq .chezmoi.osRelease.id "fedora" }}
PKG_MANAGER="dnf"
PKG_UPDATE="sudo dnf update -y"
PKG_INSTALL="sudo dnf install -y"
PKG_SEARCH="dnf search"

PACKAGES=(
  @development-tools
  curl
  git
  unzip
  zip
  zsh
  fd-find
  ripgrep
  fzf
  tmux
  python3
  python3-pip
  openssl-devel
  readline-devel
  zlib-devel
  bzip2-devel
  sqlite-devel
  llvm
  ncurses-devel
  xz-devel
  tk-devel
  libxml2-devel
  xmlsec1-devel
  libffi-devel
  xz-devel
)

{{- else if eq .chezmoi.osRelease.id "centos" }}
PKG_MANAGER="yum"
PKG_UPDATE="sudo yum update -y"
PKG_INSTALL="sudo yum install -y"
PKG_SEARCH="yum search"

PACKAGES=(
  groupinstall\ \"Development\ Tools\"
  curl
  git
  unzip
  zip
  zsh
  python3
  python3-pip
  openssl-devel
  readline-devel
  zlib-devel
  bzip2-devel
  sqlite-devel
  llvm
  ncurses-devel
  xz-devel
  tk-devel
  libxml2-devel
  xmlsec1-devel
  libffi-devel
  xz-devel
  epel-release
  fzf
  tmux
)

{{- else if eq .chezmoi.osRelease.id "arch" }}
PKG_MANAGER="pacman"
PKG_UPDATE="sudo pacman -Syu --noconfirm"
PKG_INSTALL="sudo pacman -S --noconfirm"
PKG_SEARCH="pacman -Ss"

PACKAGES=(
  base-devel
  curl
  git
  unzip
  zip
  zsh
  fd
  ripgrep
  fzf
  tmux
  python
  python-pip
  openssl
  readline
  zlib
  bzip2
  sqlite
  llvm
  ncurses
  xz
  tk
  libxml2
  xmlsec
  libffi
  xz
)

{{- else if eq .chezmoi.osRelease.id "opensuse-tumbleweed" }}
PKG_MANAGER="zypper"
PKG_UPDATE="sudo zypper refresh"
PKG_INSTALL="sudo zypper install -y"
PKG_SEARCH="zypper search"

PACKAGES=(
  pattern-devel-base
  curl
  git
  unzip
  zip
  zsh
  fd
  ripgrep
  fzf
  tmux
  python3
  python3-pip
  libopenssl-devel
  readline-devel
  zlib-devel
  libbz2-devel
  sqlite3-devel
  llvm
  ncurses-devel
  xz-devel
  tk-devel
  libxml2-devel
  xmlsec1-devel
  libffi-devel
  xz-devel
)

{{- else }}
echo "Unsupported distribution: {{ .chezmoi.osRelease.id }}"
echo "Please install packages manually or add support for your distribution"
exit 1
{{- end }}

# Update package database
echo "Updating package database..."
$PKG_UPDATE

# Install packages
echo "Installing packages using $PKG_MANAGER..."
$PKG_INSTALL "${PACKAGES[@]}"

echo "Package installation completed for {{ .chezmoi.osRelease.id }}"
